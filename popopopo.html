<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Activit√© interactive ‚Äî Choisir les bons canaux de recrutement (Boulangeries Ange)</title>
  <style>
    :root{
      --lime:#c8d223;
      --green:#195850;
      --blue:#273c86;
      --text:#1c1c1c;
      --muted:#5b5b5b;
      --border:#e7e7e7;
      --bg:#ffffff;
      --ok:#1f7a3b;
      --warn:#b7791f;
      --bad:#b42318;
      --shadow: 0 8px 24px rgba(0,0,0,.08);
      --radius: 14px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
      line-height:1.45;
    }
    .topbar{
      position:sticky; top:0; z-index:10;
      background:#fff;
      border-bottom:1px solid var(--border);
    }
    .topbar-inner{
      max-width:1100px; margin:0 auto;
      padding:14px 18px;
      display:flex; align-items:center; gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:260px;
    }
    .badge{
      width:36px; height:36px; border-radius:10px;
      background: linear-gradient(135deg, var(--green), var(--blue));
      box-shadow: var(--shadow);
      display:grid; place-items:center;
      color:white; font-weight:800;
      letter-spacing:.5px;
    }
    .brand-title{
      display:flex; flex-direction:column;
    }
    .brand-title b{font-size:14px}
    .brand-title span{font-size:12px; color:var(--muted)}
    .progress{
      flex:1;
      display:flex; flex-direction:column; gap:6px;
    }
    .progress-row{
      display:flex; justify-content:space-between; align-items:center;
      font-size:12px; color:var(--muted);
    }
    .bar{
      height:10px; border-radius:999px;
      background:#f2f2f2; overflow:hidden;
      border:1px solid var(--border);
    }
    .bar > div{
      height:100%; width:0%;
      background: linear-gradient(90deg, var(--lime), var(--green), var(--blue));
      border-radius:999px;
      transition: width .35s ease;
    }
    .score-pill{
      display:flex; align-items:center; gap:8px;
      padding:8px 12px;
      border:1px solid var(--border);
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      background:#fff;
      white-space:nowrap;
    }
    .score-pill b{
      color:var(--blue);
      font-variant-numeric: tabular-nums;
    }

    main{max-width:1100px; margin:0 auto; padding:22px 18px 48px;}
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
    }
    @media (max-width: 960px){
      .grid{grid-template-columns: 1fr}
      .brand{min-width:auto}
    }

    .card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background:#fff;
      box-shadow: 0 6px 18px rgba(0,0,0,.04);
      overflow:hidden;
    }
    .card-h{
      padding:16px 16px 10px;
      border-bottom:1px solid var(--border);
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px;
    }
    .kicker{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; color:var(--green);
      font-weight:700;
      letter-spacing:.2px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: var(--lime);
      box-shadow: 0 0 0 3px rgba(200,210,35,.18);
      margin-top:2px;
    }
    .card-h h1,.card-h h2{margin:6px 0 0; font-size:18px}
    .card-h p{margin:8px 0 0; color:var(--muted); font-size:13px}
    .card-b{padding:16px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px;
      border:1px solid var(--border);
      font-size:12px; color:var(--muted);
      background:#fff;
    }
    .pill strong{color:var(--text)}
    .meta{
      display:flex; flex-wrap:wrap; gap:8px;
      margin-top:10px;
    }

    .theory{
      display:flex; flex-direction:column; gap:12px;
    }
    .callout{
      border-left:6px solid var(--blue);
      background: rgba(39,60,134,.06);
      padding:12px 12px 12px 12px;
      border-radius: 12px;
    }
    .callout b{color:var(--blue)}
    .callout p{margin:6px 0 0; color:var(--muted); font-size:13px}
    .mini-grid{
      display:grid; grid-template-columns:1fr 1fr; gap:10px;
    }
    @media (max-width: 560px){ .mini-grid{grid-template-columns:1fr} }
    .rule{
      border:1px solid var(--border);
      border-radius: 12px;
      padding:12px;
      background:#fff;
    }
    .rule h3{
      margin:0 0 6px;
      font-size:13px;
      color: var(--green);
      display:flex; align-items:center; gap:8px;
    }
    .rule h3 .tag{
      font-family: var(--mono);
      font-size:11px;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(25,88,80,.25);
      color: var(--green);
      background: rgba(25,88,80,.06);
    }
    .rule p{margin:0; color:var(--muted); font-size:13px}
    .rule ul{margin:8px 0 0 18px; color:var(--muted); font-size:13px}
    .rule li{margin:4px 0}

    .channels{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 560px){ .channels{grid-template-columns:1fr} }
    .ch{
      border:1px solid var(--border);
      border-radius: 12px;
      padding:12px;
      background:#fff;
      cursor:pointer;
      transition: transform .08s ease, border-color .12s ease, box-shadow .12s ease;
      position:relative;
      min-height:92px;
    }
    .ch:hover{
      transform: translateY(-1px);
      border-color: rgba(39,60,134,.30);
      box-shadow: 0 8px 20px rgba(39,60,134,.08);
    }
    .ch.selected{
      border-color: rgba(25,88,80,.55);
      box-shadow: 0 10px 24px rgba(25,88,80,.10);
      outline: 3px solid rgba(200,210,35,.18);
    }
    .ch-top{
      display:flex; align-items:flex-start; gap:10px;
    }
    .ico{
      width:34px; height:34px; border-radius:10px;
      display:grid; place-items:center;
      background: rgba(39,60,134,.07);
      border:1px solid rgba(39,60,134,.12);
      flex: 0 0 auto;
      font-size:18px;
    }
    .ch h4{margin:0; font-size:14px}
    .ch p{margin:4px 0 0; color:var(--muted); font-size:12.5px}

    .status{
      position:absolute; top:10px; right:10px;
      font-size:11px; font-weight:800;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid transparent;
      display:none;
    }
    .status.ok{display:inline-flex; background:rgba(31,122,59,.08); color:var(--ok); border-color:rgba(31,122,59,.20)}
    .status.bad{display:inline-flex; background:rgba(180,35,24,.07); color:var(--bad); border-color:rgba(180,35,24,.18)}
    .status.miss{display:inline-flex; background:rgba(183,121,31,.10); color:var(--warn); border-color:rgba(183,121,31,.20)}

    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:14px;
    }
    button{
      border:1px solid var(--border);
      background:#fff;
      color: var(--text);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:700;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease;
    }
    button:hover{
      transform: translateY(-1px);
      border-color: rgba(39,60,134,.25);
      box-shadow: 0 10px 24px rgba(0,0,0,.06);
    }
    button.primary{
      background: linear-gradient(90deg, rgba(200,210,35,.22), rgba(25,88,80,.14));
      border-color: rgba(25,88,80,.25);
    }
    button.primary span{
      color: var(--green);
    }
    button.secondary{
      background: rgba(39,60,134,.06);
      border-color: rgba(39,60,134,.20);
      color: var(--blue);
    }
    button:disabled{
      opacity:.55; cursor:not-allowed; transform:none; box-shadow:none;
    }

    .feedback{
      display:none;
      margin-top:14px;
      border:1px solid var(--border);
      border-radius: 12px;
      padding:12px;
      background: rgba(25,88,80,.04);
    }
    .feedback.show{display:block}
    .fb-title{
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
    }
    .fb-title h3{margin:0; font-size:14px; color: var(--green)}
    .points{
      font-family: var(--mono);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(39,60,134,.18);
      color: var(--blue);
      background: rgba(39,60,134,.06);
      white-space:nowrap;
    }
    .feedback p{margin:8px 0 0; color:var(--muted); font-size:13px}
    .fb-list{
      margin:10px 0 0;
      padding:0;
      list-style:none;
      display:flex; flex-direction:column; gap:8px;
    }
    .fb-item{
      border:1px solid var(--border);
      border-radius: 12px;
      padding:10px;
      background:#fff;
    }
    .fb-item b{font-size:12px}
    .fb-item .why{margin:6px 0 0; font-size:12.5px; color:var(--muted)}
    .fb-item .lab{
      font-size:11px; font-weight:900;
      padding:3px 8px; border-radius:999px;
      border:1px solid transparent;
      display:inline-flex; align-items:center; gap:6px;
      margin-left:8px;
    }
    .lab.ok{background:rgba(31,122,59,.08); color:var(--ok); border-color:rgba(31,122,59,.18)}
    .lab.bad{background:rgba(180,35,24,.07); color:var(--bad); border-color:rgba(180,35,24,.18)}
    .lab.miss{background:rgba(183,121,31,.10); color:var(--warn); border-color:rgba(183,121,31,.20)}

    .screen{display:none}
    .screen.show{display:block}

    .result-hero{
      padding:16px;
      background: linear-gradient(135deg, rgba(39,60,134,.08), rgba(200,210,35,.10));
      border:1px solid rgba(39,60,134,.14);
      border-radius: 16px;
    }
    .result-hero h2{margin:0 0 6px}
    .result-hero p{margin:0; color:var(--muted)}
    .result-grid{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px;
      margin-top:12px;
    }
    @media (max-width: 720px){ .result-grid{grid-template-columns:1fr} }
    .result-box{
      border:1px solid var(--border);
      border-radius: 14px;
      padding:12px;
      background:#fff;
    }
    .result-box h3{margin:0 0 6px; font-size:13px; color:var(--blue)}
    .result-box p{margin:0; color:var(--muted); font-size:13px}
    .small{font-size:12px; color:var(--muted)}
    .hr{height:1px; background:var(--border); margin:12px 0}
    .hint{
      font-size:12px; color:var(--muted);
      margin-top:8px;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="badge">RH</div>
        <div class="brand-title">
          <b>Choisir ses canaux de recrutement</b>
          <span>Boulangeries Ange ¬∑ activit√© interactive</span>
        </div>
      </div>

      <div class="progress">
        <div class="progress-row">
          <span id="stepLabel">Introduction</span>
          <span><span id="stepCount">0</span>/4 sc√©narios</span>
        </div>
        <div class="bar" aria-hidden="true"><div id="barFill"></div></div>
      </div>

      <div class="score-pill" title="Score cumul√©">
        Score <b><span id="scoreTotal">0</span>/100</b>
      </div>
    </div>
  </div>

  <main>
    <!-- INTRO -->
    <section id="screenIntro" class="screen show">
      <div class="grid">
        <div class="card">
          <div class="card-h">
            <div>
              <div class="kicker"><span class="dot"></span>Objectif de comp√©tence</div>
              <h1>S√©lectionner les canaux de recrutement appropri√©s</h1>
              <p>
                Vous allez traiter 4 situations r√©alistes en boulangerie (Boulangeries Ange).
                √Ä chaque fois, vous devrez <b>raisonner</b> en combinant <b>poste</b>, <b>urgence</b> et <b>bassin d‚Äôemploi</b>,
                puis choisir une <b>strat√©gie multicanale</b>.
              </p>
              <div class="meta">
                <span class="pill"><strong>Format</strong> ¬∑ 4 sc√©narios ¬∑ feedback imm√©diat</span>
                <span class="pill"><strong>Score</strong> ¬∑ 25 pts/sc√©nario ¬∑ total 100</span>
                <span class="pill"><strong>R√®gle</strong> ¬∑ plusieurs canaux possibles</span>
              </div>
            </div>
            <div class="pill" style="border-color: rgba(200,210,35,.55); color: var(--green);">
              <strong style="color:var(--green)">‚ö°</strong>Learning by doing
            </div>
          </div>
          <div class="card-b theory">
            <div class="callout">
              <b>Id√©e cl√©</b>
              <p>
                Un recrutement efficace n‚Äôest pas ‚Äúun canal = une solution‚Äù.
                C‚Äôest une <b>d√©cision contextualis√©e</b> : on combine des leviers rapides et structurels,
                plus ou moins cibl√©s, selon la r√©alit√© locale et le profil recherch√©.
              </p>
            </div>

            <div class="mini-grid">
              <div class="rule">
                <h3>1) Nature du poste <span class="tag">Ciblage</span></h3>
                <p>Plus le poste est qualifi√©/sp√©cifique, plus il faut des canaux ‚Äúpr√©cis‚Äù.</p>
                <ul>
                  <li>Poste rare ‚Üí r√©seaux pro, sp√©cialis√©es, cooptation, sourcing.</li>
                  <li>Poste courant ‚Üí canaux grand public + proximit√© locale.</li>
                </ul>
              </div>
              <div class="rule">
                <h3>2) Urgence <span class="tag">Vitesse</span></h3>
                <p>Plus c‚Äôest urgent, plus on privil√©gie des canaux activables vite.</p>
                <ul>
                  <li>Imm√©diat ‚Üí int√©rim, r√©seaux locaux, viviers, social.</li>
                  <li>Anticip√© ‚Üí √©coles/CFA, marque employeur, partenaires.</li>
                </ul>
              </div>
              <div class="rule">
                <h3>3) Bassin d‚Äôemploi <span class="tag">Territoire</span></h3>
                <p>Le territoire conditionne la disponibilit√© et la concurrence.</p>
                <ul>
                  <li>Zone tendue ‚Üí diff√©renciation + canaux multiples.</li>
                  <li>Zone rurale ‚Üí proximit√©, affichage, r√©seaux locaux.</li>
                </ul>
              </div>
              <div class="rule">
                <h3>4) Logique multicanale <span class="tag">Robustesse</span></h3>
                <p>On s√©curise en combinant : visibilit√© + ciblage + rapidit√©.</p>
                <ul>
                  <li>1 canal = fragile ; 3‚Äì5 canaux = robuste.</li>
                  <li>On √©vite les r√©flexes : ‚ÄúLinkedIn pour tout‚Äù ou ‚ÄúFrance Travail suffit‚Äù.</li>
                </ul>
              </div>
            </div>

            <div class="actions">
              <button class="primary" id="btnStart"><span>‚ñ∂</span> D√©marrer l‚Äôactivit√©</button>
              <button class="secondary" id="btnShowRules">Voir les r√®gles de score</button>
            </div>

            <div id="rulesBox" class="feedback" style="display:none;">
              <div class="fb-title">
                <h3>R√®gles de score (simplifi√©es)</h3>
                <div class="points">25 pts / sc√©nario</div>
              </div>
              <p>
                Vous gagnez des points en s√©lectionnant des canaux pertinents.
                Vous perdez quelques points si vous cochez des canaux clairement inadapt√©s.
                Le score ne descend jamais sous 0.
              </p>
              <p class="small">
                Note : l‚Äôobjectif n‚Äôest pas d‚Äô‚Äú√©viter les erreurs‚Äù √† tout prix, mais de construire une strat√©gie.
                Le feedback vous explique les arbitrages attendus.
              </p>
            </div>

            <div class="hint">Conseil : avant de cliquer, identifiez d‚Äôabord ‚Äúquel est le risque principal ?‚Äù (p√©nurie, vitesse, volume, expertise‚Ä¶)</div>
          </div>
        </div>

        <aside class="card">
          <div class="card-h">
            <div>
              <div class="kicker"><span class="dot"></span>Canaux mobilisables</div>
              <h2>R√©pertoire (pour l‚Äôactivit√©)</h2>
              <p>Vous les retrouverez dans chaque sc√©nario. L‚Äôimportant : savoir <b>quand</b> les activer.</p>
            </div>
          </div>
          <div class="card-b" id="channelLegend"></div>
        </aside>
      </div>
    </section>

    <!-- SCENARIO -->
    <section id="screenScenario" class="screen">
      <div class="grid">
        <div class="card">
          <div class="card-h">
            <div>
              <div class="kicker"><span class="dot"></span><span id="scTitleKicker">Sc√©nario</span></div>
              <h2 id="scTitle">‚Äî</h2>
              <p id="scBrief">‚Äî</p>
              <div class="meta" id="scMeta"></div>
            </div>
            <div class="pill" style="border-color: rgba(39,60,134,.22); color: var(--blue);">
              <strong style="color:var(--blue)">üß©</strong>Choix multicanal
            </div>
          </div>
          <div class="card-b">
            <div class="callout" style="border-left-color: var(--green); background: rgba(25,88,80,.05);">
              <b>Question</b>
              <p style="margin-top:6px;">
                Quels canaux de recrutement privil√©gieriez-vous dans cette situation ?
                <b>Plusieurs r√©ponses sont possibles</b>. Une seule r√©ponse suffit rarement.
              </p>
            </div>

            <div style="margin-top:12px;">
              <div class="channels" id="channelGrid"></div>
            </div>

            <div class="actions">
              <button class="primary" id="btnValidate" disabled><span>‚úî</span> Valider mes choix</button>
              <button id="btnReset">R√©initialiser</button>
              <button class="secondary" id="btnNext" disabled>Sc√©nario suivant</button>
            </div>

            <div id="feedbackBox" class="feedback">
              <div class="fb-title">
                <h3 id="fbHeadline">‚Äî</h3>
                <div class="points" id="fbPoints">‚Äî</div>
              </div>
              <p id="fbText">‚Äî</p>
              <div class="hr"></div>
              <ul class="fb-list" id="fbList"></ul>
              <p class="hint" id="fbHint"></p>
            </div>
          </div>
        </div>

        <aside class="card">
          <div class="card-h">
            <div>
              <div class="kicker"><span class="dot"></span>Aide √† la d√©cision</div>
              <h2>Mini-grille</h2>
              <p>Servez-vous de ces questions avant de valider.</p>
            </div>
          </div>
          <div class="card-b">
            <div class="rule">
              <h3>√âtape 1 ¬∑ Poste</h3>
              <p class="small">Qu‚Äôest-ce qui rend ce poste facile/difficile √† sourcer en boulangerie ?</p>
              <ul>
                <li>Niveau d‚Äôexp√©rience / autonomie</li>
                <li>Comp√©tences rares (ex. tourage, management)</li>
                <li>Attractivit√© locale / horaires</li>
              </ul>
            </div>
            <div style="height:10px"></div>
            <div class="rule">
              <h3>√âtape 2 ¬∑ Urgence</h3>
              <p class="small">Quel canal active un vivier imm√©diatement et lequel construit sur 2‚Äì6 semaines ?</p>
              <ul>
                <li>Imm√©diat : int√©rim, r√©seaux locaux, social grand public</li>
                <li>Structurant : √©coles/CFA, cooptation, cabinet, sp√©cialis√©</li>
              </ul>
            </div>
            <div style="height:10px"></div>
            <div class="rule">
              <h3>√âtape 3 ¬∑ Bassin d‚Äôemploi</h3>
              <p class="small">Le territoire impose-t-il un ‚Äúplan A + plan B‚Äù ?</p>
              <ul>
                <li>Zone tendue : multiplier + diff√©rencier</li>
                <li>Rural : proximit√© + partenariats locaux</li>
                <li>Saisonnier : volume + visibilit√©</li>
              </ul>
            </div>
            <div style="height:10px"></div>
            <div class="callout" style="border-left-color: var(--lime); background: rgba(200,210,35,.10);">
              <b>Astuce</b>
              <p>Si vous cochez ‚Äútrop large‚Äù (ex. cabinet pour un besoin imm√©diat non qualifi√©), vous risquez une p√©nalit√© : ce n‚Äôest pas interdit, mais c‚Äôest moins coh√©rent.</p>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- RESULTS -->
    <section id="screenResults" class="screen">
      <div class="card">
        <div class="card-h">
          <div>
            <div class="kicker"><span class="dot"></span>R√©sultats</div>
            <h2>Votre synth√®se</h2>
            <p>Vous avez termin√© les 4 sc√©narios. Voici votre positionnement et les points cl√©s √† retenir.</p>
          </div>
        </div>
        <div class="card-b">
          <div class="result-hero">
            <h2>Score global : <span id="finalScore" style="color:var(--blue)"></span>/100</h2>
            <p id="finalMsg">‚Äî</p>
          </div>

          <div class="result-grid">
            <div class="result-box">
              <h3>üìå Ce que vous avez entra√Æn√©</h3>
              <p>
                Une logique de d√©cision : <b>poste</b> (ciblage), <b>urgence</b> (vitesse), <b>bassin</b> (territoire),
                et la construction d‚Äôune <b>strat√©gie multicanale</b> plut√¥t que d‚Äôun r√©flexe.
              </p>
            </div>
            <div class="result-box">
              <h3>üß† Principes √† retenir</h3>
              <p>
                1) Plus c‚Äôest sp√©cifique, plus il faut du cibl√©. 2) Plus c‚Äôest urgent, plus il faut du rapide.
                3) Plus le bassin est tendu, plus il faut multiplier et diff√©rencier.
                4) La robustesse vient du multicanal.
              </p>
            </div>
          </div>

          <div class="hr"></div>

          <div class="result-box">
            <h3>‚úÖ Checklist op√©rationnelle (boulangerie)</h3>
            <p class="small">
              Avant de lancer une annonce, posez-vous : (a) Qui est mon candidat ‚Äúr√©aliste‚Äù sur ce territoire ?
              (b) Dans combien de jours dois-je l‚Äôavoir ? (c) Quels 3 canaux compl√©mentaires couvrent : visibilit√© + ciblage + rapidit√© ?
            </p>
          </div>

          <div class="actions" style="margin-top:14px;">
            <button class="primary" id="btnRestart"><span>‚Üª</span> Refaire l‚Äôactivit√©</button>
            <button id="btnBackIntro">Retour √† l‚Äôintroduction</button>
          </div>

          <p class="hint">
            Variante d‚Äôanimation (si vous utilisez ceci en classe) : faites justifier √† l‚Äôoral en 30 secondes, puis comparez deux strat√©gies ‚Äú√©quivalentes‚Äù mais diff√©rentes, en discutant le bassin d‚Äôemploi.
          </p>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ----------------------------
    // Donn√©es canaux (r√©utilis√©es)
    // ----------------------------
    const CHANNELS = [
      { id:"france_travail", name:"France Travail / jobboards g√©n√©ralistes", icon:"üóÇÔ∏è", desc:"Large diffusion et vivier local, utile pour postes courants." },
      { id:"linkedin", name:"R√©seaux sociaux professionnels (LinkedIn)", icon:"üíº", desc:"Ciblage et approche directe pour profils qualifi√©s / encadrement." },
      { id:"social_local", name:"R√©seaux sociaux grand public / groupes locaux", icon:"üì£", desc:"Rapide, utile pour proximit√©, saisonnier, besoins imm√©diats." },
      { id:"interim", name:"Int√©rim", icon:"‚è±Ô∏è", desc:"Activation tr√®s rapide, utile si urgence + continuit√© d‚Äôactivit√©." },
      { id:"cooptation", name:"Cooptation (r√©seau interne)", icon:"ü§ù", desc:"Qualit√© et fit culturel, efficace en zone tendue si √©quipe mobilis√©e." },
      { id:"affichage", name:"Affichage local (magasin, commerces, mairie)", icon:"üìå", desc:"Proximit√© et visibilit√© terrain, pertinent en semi-rural / local." },
      { id:"ecoles_cfa", name:"√âcoles / CFA (apprentissage)", icon:"üéì", desc:"Canal structurant pour anticiper et s√©curiser des viviers." },
      { id:"specialise", name:"Sites sp√©cialis√©s m√©tiers (boulangerie/restauration)", icon:"ü•ñ", desc:"Ciblage m√©tier, utile quand le profil est plus rare." },
      { id:"cabinet", name:"Cabinet de recrutement", icon:"üß≠", desc:"Pour postes √† responsabilit√© / raret√©, d√©lais plus longs et co√ªt." }
    ];

    // ------------------------------------------------
    // 4 sc√©narios contextualis√©s Boulangeries Ange
    // ------------------------------------------------
    const SCENARIOS = [
      {
        title: "Boulanger (H/F) ‚Äî ouverture de fournil en zone urbaine tendue",
        brief: "Vous recrutez un boulanger autonome. Plusieurs concurrents recrutent en m√™me temps dans la zone. Vous voulez s√©curiser en 3‚Äì4 semaines.",
        meta: {
          poste: "Boulanger ¬∑ autonome ¬∑ exp√©rience 2+ ans",
          urgence: "Court terme (3‚Äì4 semaines)",
          bassin: "Urbain dense ¬∑ march√© concurrentiel"
        },
        // canaux consid√©r√©s pertinents dans cette situation
        correct: ["specialise","cooptation","france_travail","social_local"],
        // canaux consid√©r√©s franchement moins adapt√©s ici (pas interdits, mais ‚Äúhors-sujet‚Äù)
        incorrect: ["cabinet"],
        rationale: {
          specialise: "Le poste demande un vrai ciblage m√©tier : les plateformes sp√©cialis√©es touchent des candidats d√©j√† qualifi√©s.",
          cooptation: "En zone tendue, le r√©seau interne peut acc√©l√©rer l‚Äôacc√®s √† des profils fiables et motiv√©s.",
          france_travail: "Large diffusion locale : utile pour capter des profils disponibles, en compl√©ment d‚Äôun canal m√©tier.",
          social_local: "Acc√©l√®re la visibilit√© (groupes de quartier, pages locales) et peut d√©clencher des candidatures rapides.",
          cabinet: "Pour un poste op√©rationnel avec d√©lai de 3‚Äì4 semaines, le cabinet est souvent disproportionn√© (co√ªt/d√©lai)."
        },
        hint: "En zone tendue, la robustesse vient du couple : ciblage m√©tier + amplification locale + activation du r√©seau."
      },
      {
        title: "Vendeur(se) en boulangerie ‚Äî remplacement demain (urgence imm√©diate)",
        brief: "Absence impr√©vue. Vous devez ouvrir et tenir le service d√®s demain. Le bassin est semi-rural, avec peu de candidats disponibles.",
        meta: {
          poste: "Vente comptoir ¬∑ prise de poste rapide ¬∑ formation courte",
          urgence: "Imm√©diat (d√®s demain)",
          bassin: "Semi-rural ¬∑ vivier restreint"
        },
        correct: ["interim","social_local","affichage","france_travail"],
        incorrect: ["cabinet","linkedin","specialise"],
        rationale: {
          interim: "C‚Äôest le canal le plus rapide pour s√©curiser la continuit√© d‚Äôactivit√© d√®s demain.",
          social_local: "Les groupes locaux (Facebook, pages de commune) sont tr√®s efficaces en semi-rural pour activer la proximit√©.",
          affichage: "Dans les zones semi-rurales, la visibilit√© terrain (magasin/partenaires) capte des candidats proches et disponibles.",
          france_travail: "Permet d‚Äôactiver un vivier local et d‚Äôappeler directement des profils disponibles.",
          cabinet: "Trop lent et co√ªteux pour un remplacement imm√©diat sur un poste courant.",
          linkedin: "Peu pertinent ici : le canal est plus adapt√© √† des profils qualifi√©s/encadrement.",
          specialise: "Ciblage m√©tier inutile pour un poste vente urgent : priorit√© aux canaux rapides et de proximit√©."
        },
        hint: "Quand l‚Äôurgence est maximale, le crit√®re dominant est la vitesse (puis la proximit√©)."
      },
      {
        title: "√âquipe saisonni√®re (6 personnes) ‚Äî p√©riode estivale (volume + visibilit√©)",
        brief: "Vous anticipez un pic d‚Äôactivit√© touristique. Vous recrutez en volume pour 2 mois. Le territoire est tr√®s saisonnier, rotation √©lev√©e.",
        meta: {
          poste: "Saisonnier ¬∑ volume ¬∑ contrats courts",
          urgence: "Anticip√© (4‚Äì8 semaines avant)",
          bassin: "Touristique / saisonnier"
        },
        correct: ["social_local","france_travail","affichage","ecoles_cfa"],
        incorrect: ["cabinet","linkedin","specialise"],
        rationale: {
          social_local: "Tr√®s bon levier de visibilit√© rapide et massive (communaut√©s locales + touristiques) pour recruter en volume.",
          france_travail: "Diffusion large et viviers mobilisables pour contrats courts, utile pour obtenir beaucoup de candidatures.",
          affichage: "Fort impact en zone touristique (passage, commerces, partenariats), utile pour attirer localement.",
          ecoles_cfa: "M√™me si c‚Äôest saisonnier, les √©coles/CFA peuvent fournir des profils disponibles (jobs d‚Äô√©t√©) et renforcer la visibilit√©.",
          cabinet: "Peu adapt√© : co√ªt et d√©marche incompatible avec un besoin de volume et de rapidit√© de candidatures.",
          linkedin: "Canal moins performant pour recrutement saisonnier en volume.",
          specialise: "Ciblage m√©tier pas prioritaire : le besoin principal est la visibilit√© et le volume."
        },
        hint: "Pour du volume saisonnier : priorit√© √† la visibilit√© + facilit√© de candidature + proximit√©."
      },
      {
        title: "Responsable de magasin ‚Äî cr√©ation de poste (management + exigence)",
        brief: "Vous ouvrez une nouvelle boulangerie. Vous cherchez un responsable (pilotage, management, qualit√©). Vous avez 6‚Äì8 semaines.",
        meta: {
          poste: "Management ¬∑ responsabilit√© ¬∑ exp√©rience confirm√©e",
          urgence: "Court terme (6‚Äì8 semaines)",
          bassin: "Urbain / concurrentiel"
        },
        correct: ["linkedin","cooptation","cabinet","specialise"],
        incorrect: ["affichage"],
        rationale: {
          linkedin: "C‚Äôest un canal cl√© pour toucher des managers, faire du ciblage et du sourcing proactif.",
          cooptation: "Pour un poste sensible, le r√©seau aide √† s√©curiser le fit culturel et √† acc√©l√©rer le sourcing.",
          cabinet: "Utile si le bassin est concurrentiel et que vous voulez s√©curiser une shortlist qualifi√©e rapidement.",
          specialise: "Peut toucher des profils d√©j√† dans la restauration/commerce alimentaire avec exp√©rience pertinente.",
          affichage: "Trop local et peu discriminant pour un poste de management : risque de candidatures hors-cible."
        },
        hint: "Plus le poste est strat√©gique, plus l‚Äôenjeu est la qualit√© du ciblage et la s√©curisation du fit."
      }
    ];

    // ----------------------------
    // √âtat
    // ----------------------------
    let current = -1;
    let totalScore = 0;
    let perScenarioScore = [0,0,0,0];
    let validated = false;
    let selected = new Set();

    // ----------------------------
    // Helpers UI
    // ----------------------------
    const $ = (id) => document.getElementById(id);
    const show = (screenId) => {
      ["screenIntro","screenScenario","screenResults"].forEach(s => $(s).classList.remove("show"));
      $(screenId).classList.add("show");
    };

    const updateTopbar = () => {
      const stepCount = Math.max(0, current);
      $("stepCount").textContent = Math.max(0, current+1);
      $("scoreTotal").textContent = totalScore;

      if(current < 0){
        $("stepLabel").textContent = "Introduction";
        $("barFill").style.width = "0%";
      } else if(current >= 0 && current < SCENARIOS.length){
        $("stepLabel").textContent = `Sc√©nario ${current+1}`;
        $("barFill").style.width = `${Math.round(((current+1)/SCENARIOS.length)*100)}%`;
      } else {
        $("stepLabel").textContent = "R√©sultats";
        $("barFill").style.width = "100%";
      }
    };

    // ----------------------------
    // Rendu l√©gende canaux
    // ----------------------------
    const renderLegend = () => {
      const wrap = document.createElement("div");
      wrap.className = "channels";
      CHANNELS.forEach(ch => {
        const card = document.createElement("div");
        card.className = "ch";
        card.style.cursor = "default";
        card.innerHTML = `
          <div class="ch-top">
            <div class="ico">${ch.icon}</div>
            <div>
              <h4>${ch.name}</h4>
              <p>${ch.desc}</p>
            </div>
          </div>
        `;
        wrap.appendChild(card);
      });
      $("channelLegend").appendChild(wrap);
    };

    // ----------------------------
    // Rendu sc√©nario
    // ----------------------------
    const renderScenario = () => {
      validated = false;
      selected = new Set();

      const sc = SCENARIOS[current];
      $("scTitleKicker").textContent = `Sc√©nario ${current+1}/4`;
      $("scTitle").textContent = sc.title;
      $("scBrief").textContent = sc.brief;

      // Meta pills
      const meta = $("scMeta");
      meta.innerHTML = "";
      const mk = (label, value, color) => {
        const s = document.createElement("span");
        s.className = "pill";
        s.innerHTML = `<strong>${label}</strong> ¬∑ ${value}`;
        if(color){
          s.style.borderColor = color;
        }
        return s;
      };
      meta.appendChild(mk("Poste", sc.meta.poste, "rgba(39,60,134,.20)"));
      meta.appendChild(mk("Urgence", sc.meta.urgence, "rgba(200,210,35,.55)"));
      meta.appendChild(mk("Bassin", sc.meta.bassin, "rgba(25,88,80,.25)"));

      // Grid canaux
      const grid = $("channelGrid");
      grid.innerHTML = "";
      CHANNELS.forEach(ch => {
        const item = document.createElement("div");
        item.className = "ch";
        item.dataset.id = ch.id;

        item.innerHTML = `
          <span class="status" id="st_${ch.id}"></span>
          <div class="ch-top">
            <div class="ico">${ch.icon}</div>
            <div>
              <h4>${ch.name}</h4>
              <p>${ch.desc}</p>
            </div>
          </div>
        `;

        item.addEventListener("click", () => {
          if(validated) return;
          const id = ch.id;
          if(selected.has(id)){
            selected.delete(id);
            item.classList.remove("selected");
          } else {
            selected.add(id);
            item.classList.add("selected");
          }
          $("btnValidate").disabled = selected.size === 0;
        });

        grid.appendChild(item);
      });

      $("btnValidate").disabled = true;
      $("btnNext").disabled = true;
      $("feedbackBox").classList.remove("show");
      updateTopbar();
    };

    // ----------------------------
    // Scoring + feedback
    // ----------------------------
    const scoreScenario = () => {
      const sc = SCENARIOS[current];
      const correct = new Set(sc.correct);
      const incorrect = new Set(sc.incorrect);

      let good = 0;
      let bad = 0;

      selected.forEach(id => {
        if(correct.has(id)) good++;
        else if(incorrect.has(id)) bad++;
        // neutre = ni correct ni incorrect : pas de points, pas de p√©nalit√©
      });

      const missed = [...correct].filter(id => !selected.has(id));

      // Score (25 pts)
      // - points pour bons choix (jusqu‚Äô√† 25)
      // - p√©nalit√© mod√©r√©e pour erreurs manifestes
      // - plancher 0
      const perGood = correct.size > 0 ? 25 / correct.size : 0;
      let score = Math.round(good * perGood);
      score -= bad * 4; // p√©nalit√© mod√©r√©e
      score = Math.max(0, Math.min(25, score));

      // Message de synth√®se
      let headline = "√Ä am√©liorer";
      if(score >= 21) headline = "Excellent";
      else if(score >= 14) headline = "Partiellement correct";

      // Feedback text : ancr√© sur poste/urgence/bassin
      const fbText =
        `Votre strat√©gie est √©valu√©e sur votre capacit√© √† articuler ` +
        `le <b>ciblage</b> (nature du poste), la <b>vitesse</b> (urgence) et ` +
        `la <b>r√©alit√© territoriale</b> (bassin d‚Äôemploi). ` +
        `Ici, le crit√®re dominant est : <b>${dominantCriterion(sc.meta)}</b>.`;

      return { score, headline, missed, good, bad, fbText };
    };

    const dominantCriterion = (meta) => {
      // heuristique simple et lisible
      if(meta.urgence.toLowerCase().includes("imm√©diat")) return "la vitesse (urgence imm√©diate)";
      if(meta.poste.toLowerCase().includes("management") || meta.poste.toLowerCase().includes("responsabilit√©")) return "le ciblage (poste strat√©gique)";
      if(meta.bassin.toLowerCase().includes("touristique") || meta.bassin.toLowerCase().includes("saisonnier")) return "la visibilit√© (volume saisonnier)";
      if(meta.bassin.toLowerCase().includes("tendue") || meta.bassin.toLowerCase().includes("concurrentiel")) return "la robustesse multicanale (march√© tendu)";
      return "l‚Äô√©quilibre poste / urgence / bassin";
    };

    const applyVisualFeedback = () => {
      const sc = SCENARIOS[current];
      const correct = new Set(sc.correct);
      const incorrect = new Set(sc.incorrect);

      // reset status pills
      CHANNELS.forEach(ch => {
        const st = $("st_" + ch.id);
        st.className = "status";
        st.textContent = "";
      });

      // Mark selected
      selected.forEach(id => {
        const st = $("st_" + id);
        if(correct.has(id)){
          st.classList.add("status","ok");
          st.textContent = "Correct";
        } else if(incorrect.has(id)){
          st.classList.add("status","bad");
          st.textContent = "Incorrect";
        } else {
          // neutre : on peut laisser vide pour √©viter une sur-signalisation
        }
      });

      // Mark missed correct
      sc.correct.forEach(id => {
        if(!selected.has(id)){
          const st = $("st_" + id);
          st.classList.add("status","miss");
          st.textContent = "Manqu√©";
        }
      });
    };

    const renderFeedbackDetails = () => {
      const sc = SCENARIOS[current];
      const correct = new Set(sc.correct);
      const incorrect = new Set(sc.incorrect);

      const list = $("fbList");
      list.innerHTML = "";

      // On liste : (1) bons choix, (2) erreurs manifestes, (3) canaux manqu√©s
      const addItem = (id, labelClass, labelText) => {
        const ch = CHANNELS.find(x => x.id === id);
        const why = sc.rationale[id] || "‚Äî";
        const li = document.createElement("li");
        li.className = "fb-item";
        li.innerHTML = `
          <div>
            <b>${ch ? ch.name : id}</b>
            <span class="lab ${labelClass}">${labelText}</span>
          </div>
          <div class="why">${why}</div>
        `;
        list.appendChild(li);
      };

      // Correct selected
      [...selected].filter(id => correct.has(id)).forEach(id => addItem(id, "ok", "Pertinent"));
      // Incorrect selected
      [...selected].filter(id => incorrect.has(id)).forEach(id => addItem(id, "bad", "Peu adapt√©"));
      // Missed correct
      sc.correct.filter(id => !selected.has(id)).forEach(id => addItem(id, "miss", "√Ä envisager"));

      $("fbHint").innerHTML = `<b>Rep√®re :</b> ${sc.hint}`;
    };

    // ----------------------------
    // Navigation
    // ----------------------------
    const start = () => {
      current = 0;
      totalScore = 0;
      perScenarioScore = [0,0,0,0];
      show("screenScenario");
      renderScenario();
    };

    const validate = () => {
      if(validated) return;

      validated = true;
      const { score, headline, fbText } = scoreScenario();

      // mise √† jour score global (on remplace au cas o√π)
      totalScore -= perScenarioScore[current];
      perScenarioScore[current] = score;
      totalScore += score;

      $("fbHeadline").textContent = headline;
      $("fbPoints").textContent = `+${score} pts (sur 25)`;
      $("fbText").innerHTML = fbText;

      applyVisualFeedback();
      renderFeedbackDetails();

      $("feedbackBox").classList.add("show");
      $("btnNext").disabled = false;
      $("btnValidate").disabled = true;

      updateTopbar();
    };

    const next = () => {
      if(current < SCENARIOS.length - 1){
        current++;
        renderScenario();
      } else {
        // results
        show("screenResults");
        $("finalScore").textContent = totalScore;

        let msg = "Vous avez une base solide : continuez √† expliciter vos arbitrages pour stabiliser vos strat√©gies.";
        if(totalScore >= 85){
          msg = "Ma√Ætrise √©lev√©e : vos choix montrent une logique multicanale coh√©rente et contextualis√©e.";
        } else if(totalScore >= 60){
          msg = "Ma√Ætrise interm√©diaire : vos strat√©gies sont souvent pertinentes, mais certaines situations demandent un meilleur arbitrage urgence/territoire.";
        } else {
          msg = "√Ä consolider : vous avez parfois appliqu√© des r√©flexes de canal. Reprenez la mini-grille poste/urgence/bassin pour guider vos choix.";
        }
        $("finalMsg").textContent = msg;

        current = SCENARIOS.length; // pour la topbar
        updateTopbar();
      }
    };

    const resetSelection = () => {
      if(validated) return;
      selected.clear();
      document.querySelectorAll(".ch.selected").forEach(el => el.classList.remove("selected"));
      $("btnValidate").disabled = true;
    };

    const restart = () => {
      current = -1;
      totalScore = 0;
      perScenarioScore = [0,0,0,0];
      show("screenIntro");
      updateTopbar();
    };

    // ----------------------------
    // Bindings
    // ----------------------------
    $("btnStart").addEventListener("click", start);
    $("btnValidate").addEventListener("click", validate);
    $("btnNext").addEventListener("click", next);
    $("btnReset").addEventListener("click", resetSelection);

    $("btnRestart").addEventListener("click", start);
    $("btnBackIntro").addEventListener("click", restart);

    $("btnShowRules").addEventListener("click", () => {
      const box = $("rulesBox");
      box.style.display = (box.style.display === "none" || !box.style.display) ? "block" : "none";
    });

    // init
    renderLegend();
    updateTopbar();
  </script>
</body>
</html>
